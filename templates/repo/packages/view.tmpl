{{template "base/head" .}}
<div class="page-content repository view issue packages">
	{{template "repo/header" .}}
	<div class="ui container">
		<div>
			<div class="ui stackable grid">
				<div class="sixteen wide column title">
					<div class="issue-title">
						<h1>{{.PackageDescriptor.Package.Name}} ({{.PackageDescriptor.Version.Version}})</h1>
					</div>
					{{ $timeStr := TimeSinceUnix .PackageDescriptor.Version.CreatedUnix $.Lang }}
					<div>{{.i18n.Tr "repo.packages.published_by" $timeStr .PackageDescriptor.Creator.HomeLink (.PackageDescriptor.Creator.GetDisplayName | Escape) | Safe}} {{svg .PackageDescriptor.Package.Type.SVGName}} {{.PackageDescriptor.Package.Type.Name}}</div>
					<div class="ui divider"></div>
				</div>
				<div class="twelve wide column">
					{{template "repo/packages/content/generic" .}}
					{{template "repo/packages/content/nuget" .}}
					{{template "repo/packages/content/npm" .}}
					{{template "repo/packages/content/maven" .}}
					{{template "repo/packages/content/pypi" .}}
					{{template "repo/packages/content/rubygems" .}}
				</div>
				<div class="four wide column">
					<div class="ui segment metas">
						<span class="text"><strong>{{.i18n.Tr "repo.packages.details"}}</strong></span>
						<div class="ui relaxed list">
							<div class="item">{{svg "octicon-calendar" 16 "mr-3"}} {{.PackageDescriptor.Version.CreatedUnix.FormatDate}}</div>
							<div class="item">{{svg "octicon-download" 16 "mr-3"}} {{.PackageDescriptor.Version.DownloadCount}}</div>
							{{template "repo/packages/metadata/generic" .}}
							{{template "repo/packages/metadata/nuget" .}}
							{{template "repo/packages/metadata/npm" .}}
							{{template "repo/packages/metadata/maven" .}}
							{{template "repo/packages/metadata/pypi" .}}
							{{template "repo/packages/metadata/rubygems" .}}
						</div>
						<div class="ui divider"></div>
						<span class="text"><strong>{{.i18n.Tr "repo.packages.assets"}} ({{len .PackageDescriptor.Files}})</strong></span>
						<div class="ui relaxed list">
						{{range .PackageDescriptor.Files}}
							<div class="item">
								<a href="{{$.Link}}/files/{{.File.LowerName}}">{{.File.Name}}</a>
								<span class="text small file-size">{{FileSize .Blob.Size}}</span>
							</div>
						{{end}}
						</div>
						{{if .OtherVersions}}
							<div class="ui divider"></div>
							<span class="text"><strong>{{.i18n.Tr "repo.packages.versions"}}</strong></span>
							<div class="ui relaxed list">
							{{range .OtherVersions}}
								<div class="item">
									<a href="{{$.RepoLink}}/packages/{{.ID}}">{{.Name}}</a>
									<span class="text small">{{$.i18n.Tr "repo.packages.versions.on"}} {{.CreatedUnix.FormatDate}}</span>
								</div>
							{{end}}
							</div>
						{{end}}
						{{if .CanWritePackages}}
							<div class="ui divider"></div>
							<div class="ui watching">
								<button class="fluid ui show-modal red button" data-modal="#delete-package">{{svg "octicon-trash"}} {{.i18n.Tr "repo.packages.delete"}}</button>
							</div>
							<div class="ui tiny modal" id="delete-package">
								<div class="header">
									{{.i18n.Tr "repo.packages.delete"}}
								</div>
								<div class="content">
									<div class="ui warning message text left">
										{{.i18n.Tr "repo.packages.delete.notice" .PackageDescriptor.Package.Name .PackageDescriptor.Version.Version}}
									</div>
									<form class="ui form" action="{{.Link}}" method="post">
										{{.CsrfTokenHtml}}
										<div class="text right actions">
											<div class="ui cancel button">{{.i18n.Tr "cancel"}}</div>
											<button class="ui red button">{{.i18n.Tr "ok"}}</button>
										</div>
									</form>
								</div>
							</div>
						{{end}}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{{template "base/footer" .}}
