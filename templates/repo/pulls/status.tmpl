{{/*
Template Attributes:
* CommitStatus: summary of all commit status state
* CommitStatuses: all commit status elements
* IsTippy: whether this template is the content of tippy
* is_context_required: Used in pull request commit status check table
*/}}

{{if .CommitStatus}}
<div class="{{if .IsTippy}}tippy-commit-status{{else}}pr-commit-status{{end}}">
	<div class="ui attached header top">
		{{if eq .CommitStatus.State "pending"}}
			{{ctx.Locale.Tr "repo.pulls.status_checking"}}
		{{else if eq .CommitStatus.State "success"}}
			{{ctx.Locale.Tr "repo.pulls.status_checks_success"}}
		{{else if eq .CommitStatus.State "warning"}}
			{{ctx.Locale.Tr "repo.pulls.status_checks_warning"}}
		{{else if eq .CommitStatus.State "failure"}}
			{{ctx.Locale.Tr "repo.pulls.status_checks_failure"}}
		{{else if eq .CommitStatus.State "error"}}
			{{ctx.Locale.Tr "repo.pulls.status_checks_error"}}
		{{else}}
			{{ctx.Locale.Tr "repo.pulls.status_checking"}}
		{{end}}

		{{if not .IsTippy}}
		<div class="ui right">
			<a class="hide-all-checks muted"
			data-show-all="{{ctx.Locale.Tr "repo.pulls.status_checks_show_all"}}"
			data-hide-all="{{ctx.Locale.Tr "repo.pulls.status_checks_hide_all"}}">
			{{ctx.Locale.Tr "repo.pulls.status_checks_hide_all"}}</a>
		</div>
		{{end}}
	</div>

	<div class="ui attached segment commit-status-list">
		{{range .CommitStatuses}}
			<div class="ui attached segment commit-status-item">
				{{template "repo/commit_status" .}}
				<div class="status-context">
					<span>{{.Context}} <span class="text grey">{{.Description}}</span></span>
					<div class="ui status-details">
						{{if $.is_context_required}}
							{{if (call $.is_context_required .Context)}}<div class="ui label">{{ctx.Locale.Tr "repo.pulls.status_checks_requested"}}</div>{{end}}
						{{end}}
						<span>{{if .TargetURL}}<a href="{{.TargetURL}}">{{ctx.Locale.Tr "repo.pulls.status_checks_details"}}</a>{{end}}</span>
					</div>
				</div>
			</div>
		{{end}}
	</div>
</div>
{{end}}
