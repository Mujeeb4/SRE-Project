{{if or (not .LinkAccountMode) (and .LinkAccountMode .LinkAccountModeSignIn)}}
{{template "base/alert" .}}
{{end}}
<h4 class="ui top attached header center">
	{{if .LinkAccountMode}}
		{{.locale.Tr "auth.oauth_signin_title"}}
	{{else}}
		{{.locale.Tr "auth.login_userpass"}}
	{{end}}
</h4>
<div class="ui attached segment">
	<form class="ui form" action="{{.SignInLink}}" method="post">
	{{.CsrfTokenHtml}}
	<div class="required inline field {{if and (.Err_UserName) (or (not .LinkAccountMode) (and .LinkAccountMode .LinkAccountModeSignIn))}}error{{end}}">
		<label for="user_name">{{.locale.Tr "home.uname_holder"}}</label>
		<input id="user_name" type="text" name="user_name" value="{{.user_name}}" autofocus required>
	</div>
	{{if or (not .DisablePassword) .LinkAccountMode}}
	<div class="required inline field {{if and (.Err_Password) (or (not .LinkAccountMode) (and .LinkAccountMode .LinkAccountModeSignIn))}}error{{end}}">
		<label for="password">{{.locale.Tr "password"}}</label>
		<input id="password" name="password" type="password" value="{{.password}}" autocomplete="current-password" required>
	</div>
	{{end}}
	{{if not .LinkAccountMode}}
	<div class="inline field">
		<label></label>
		<div class="ui checkbox">
			<label>{{.locale.Tr "auth.remember_me"}}</label>
			<input name="remember" type="checkbox">
		</div>
	</div>
	{{end}}

	{{template "user/auth/captcha" .}}

	<div class="inline field">
		<label></label>
		<button class="ui green button">
			{{if .LinkAccountMode}}
				{{.locale.Tr "auth.oauth_signin_submit"}}
			{{else}}
				{{.locale.Tr "sign_in"}}
			{{end}}
		</button>
		<a href="{{AppSubUrl}}/user/forgot_password">{{.locale.Tr "auth.forgot_password"}}</a>
	</div>

	{{if .ShowRegistrationButton}}
		<div class="inline field">
			<label></label>
			<a href="{{AppSubUrl}}/user/sign_up">{{.locale.Tr "auth.sign_up_now" | Str2html}}</a>
		</div>
	{{end}}

	{{if and .OrderedOAuth2Names .OAuth2Providers}}
	<hr class="ui divider"/>
	<div id="oauth2-login-navigator">
		<div id="oauth2-login-navigator-inner" class="gt-df gt-fc gt-jc">
			<span class="gt-self-center gt-mb-4">{{.locale.Tr "sign_in_with"}}</span>
			<div class="gt-df gt-fc gt-fw gt-ac gt-gap-4">
				{{range $key := .OrderedOAuth2Names}}
					{{$provider := index $.OAuth2Providers $key}}
					<a class="{{$provider.Name}} ui compact button silenced gt-df gt-ac gt-jc oauth-login-link" href="{{AppSubUrl}}/user/oauth2/{{$key}}">
						{{if eq $provider.Name "github"}}
							{{svg "octicon-mark-github" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "azuread"}}
							{{svg "gitea-azuread" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "azureadv2"}}
							{{svg "gitea-azureadv2" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "bitbucket"}}
							{{svg "gitea-bitbucket" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "discord"}}
							{{svg "gitea-discord" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "dropbox"}}
							{{svg "gitea-dropbox" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "facebook"}}
							{{svg "gitea-facebook" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "gplus"}}
							{{svg "gitea-google" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "gitlab"}}
							{{svg "gitea-gitlab" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "mastodon"}}
							{{svg "gitea-mastodon" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "microsoftonline"}}
							{{svg "gitea-microsoftonline" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "nextcloud"}}
							{{svg "gitea-nextcloud" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "twitter"}}
							{{svg "gitea-twitter" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "yandex"}}
							{{svg "gitea-yandex" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "openidConnect"}}
							{{svg "gitea-openid" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else if eq $provider.Name "gitea"}}
							{{svg "gitea-gitea" 16 "gt-mr-3"}}
							{{$provider.DisplayName}}
						{{else}}
							<img
								class="gt-object-contain gt-mr-3"
								width="16"
								height="16"
								alt="{{$provider.DisplayName}}{{if eq $provider.Name "openidConnect"}} ({{$key}}){{end}}"
								src="{{AppSubUrl}}{{$provider.Image}}"
							>
							{{$provider.DisplayName}}{{if eq $provider.Name "openidConnect"}} ({{$key}}){{end}}
						{{end}}
					</a>
				{{end}}
			</div>
		</div>
	</div>
	{{end}}
	</form>
</div>
